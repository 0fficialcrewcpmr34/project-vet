# Vet Tool by Crew

Minimal Flutter application that provides a practical weight-based dosage calculator for dogs and cats.

## Features
- Load medications from a structured JSON database (Plumb-ready when provided).
- Filter medications automatically by species.
- Select route of administration to view tailored dosing ranges and frequency guidance.
- Calculate mg-per-dose recommendations from body weight in kg or lb, including max dose limits.
- Lightweight Material 3 user interface that works on phones and tablets.

## Getting started
1. Ensure the Flutter SDK (3.13 or newer) is installed.
2. Fetch packages:
   ```bash
   flutter pub get
   ```
3. Run the app on a connected device or emulator:
   ```bash
   flutter run
   ```
4. Build a release APK (requires Android toolchain):
   ```bash
   flutter build apk --release
   ```

> **Environment note:** The provided development container does not ship with the
> Android/Flutter toolchain, so `flutter build apk` cannot run successfully here.
> Use a locally installed Flutter SDK or the GitHub Actions workflow described
> below to obtain the signed APK.

> **Note:** Platform folders (`android`, `ios`, `web`, `windows`, `macos`, `linux`) are intentionally omitted to keep the repository lightweight. Run `flutter create .` once (after cloning) to regenerate the platform scaffolding before building or running on devices. This command preserves the contents of the `lib/`, `assets/`, and configuration files already provided.

### Medication database
Replace `assets/medications.json` with the comprehensive dataset. The structure expected by the app is:
```json
{
  "name": "Medication name",
  "species": ["dog", "cat"],
  "commonUse": "Short clinical note",
  "routes": [
    {
      "name": "Route label",
      "dosage": {
        "perKg": 2.5,
        "minPerKg": 1.5,
        "maxPerKg": 3.0,
        "unit": "mg/kg",
        "label": "Frequency or special comment"
      },
      "frequency": "Every 12 hours",
      "maxTotalDoseMg": 120,
      "notes": "Optional clinical pearls"
    }
  ]
}
```
- `perKg`, `minPerKg`, and `maxPerKg` accept decimal values.
- When only a range is provided, omit `perKg`.
- `maxTotalDoseMg` (optional) enforces a hard cap for a single calculated dose.

After updating the JSON file, re-run `flutter pub get` so Flutter picks up the asset change.

## Packaging & release
### Local build
The APK generated by `flutter build apk --release` will be located under `build/app/outputs/flutter-apk/app-release.apk`. Rename it to `VetToolByCrew.apk` before publishing.

### GitHub Actions automated build
This repository includes `.github/workflows/build-apk.yml`, which:
1. Sets up Flutter 3.22 on Ubuntu runners.
2. Installs dependencies and builds both a universal APK and split-per-ABI APKs.
3. Publishes all generated APKs as workflow artifacts for easy download.
4. Creates a published GitHub release for every successful run on `main` (and for manual dispatches) with a unique tag based on the `pubspec.yaml` version and workflow run number.

To ship a release APK without a local Flutter environment:
1. Push the latest changes to the `main` branch (or dispatch the workflow manually from the **Actions** tab).
2. Wait for the **Build and Release APK** workflow to succeed.
3. Grab the universal or architecture-specific APKs either from the workflow artifacts or from the freshly published release (named `Vet Tool by Crew <version> (build <build-number>)`).
